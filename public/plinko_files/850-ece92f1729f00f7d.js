"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[850],{39968:function(e,t,n){n.d(t,{X:function(){return C}});var r=n(75271);function i(e){return{id:e.i,currencyAmount:e.ca,currency:e.c,value:e.v,currencyPayout:e.cp,payout:e.p,multiplier:e.m,user:e.u?{id:e.u.i,username:e.u.n,rank:e.u.r}:null,game:e.g?{name:e.g.n,icon:e.g.i}:{name:null,icon:null}}}var a=n(72646),c=n(32586),s=n(5093),l=n(82271),u=n(28994);function o(e){return e.map(function(t,n){return(0,c._)((0,a._)({},t),{_highlighted:(e.length-1-n)%2==0})})}var d=n(11653),f=n(99594),v=n(90223),m=n(10104),p=n(19377),h=n(19735),x=n.n(h),g=n(47544),y={CONNECT:0,DISCONNECT:1,CONNECT_ERROR:4},w=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},b=function(e){return"string"==typeof e},N=function(e){return"[object Object]"===Object.prototype.toString.call(e)},j=function(){function e(){(0,v._)(this,e)}return e.prototype.encode=function(e){return[(0,g.cv)(e)]},e}(),_=function(e){(0,m._)(n,e);var t=(0,p._)(n);function n(){var e;return(0,v._)(this,n),e=t.apply(this,arguments),e.checkPacket=function(t){if(!(w(t.type)&&t.type>=y.CONNECT&&t.type<=y.CONNECT_ERROR))throw Error("invalid_packet_type");if(!b(t.nsp))throw Error("invalid_namespace");if(!e.isDataValid(t))throw Error("invalid_payload");if(!(void 0===t.id||w(t.id)))throw Error("invalid_packet id")},e}var r=n.prototype;return r.add=function(e){var t=(0,g.Jx)(e);this.checkPacket(t),this.emit("decoded",t)},r.destroy=function(){},r.isDataValid=function(e){switch(null==e?void 0:e.type){case y.CONNECT:return(null==e?void 0:e.data)===void 0||N(e.data);case y.DISCONNECT:return(null==e?void 0:e.data)===void 0;case y.CONNECT_ERROR:return b(e.data)||N(e.data);default:return Array.isArray(e.data)}},n}(x()),E=new f.dK(d.V.LIVE_FEED,{parser:{protocol:5,Encoder:j,Decoder:_},transports:["websocket"],secure:!0,autoConnect:!1,withCredentials:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,forceNew:!1});E.socket("/").connect();var R={RecentWins:{event:"recent_wins"},RecentBets:{event:"recent_bets"},PlayerBets:{event:"bet_completed"},RecentHighBets:{event:"recent_high_bet"}},C=function(e){var t,n,d,f,v,m,p,h,x,g,y,w,b,N=e.namespace,j=e.limit,_=e.initial,C=e.enableDataListening,k=e.enableProcessing,D=e.newItemDelayMs,O=(0,r.useRef)({PlayerBets:E.socket("/player-bets"),RecentWins:E.socket("/recent-wins"),RecentBets:E.socket("/recent-bets"),RecentHighBets:E.socket("/recent-high-bets")}).current,P=R[N],S=O[N],I=(n=(t={limit:void 0===j?12:j,initial:_,processingDelayMs:D}).limit,d=t.processingDelayMs,v=void 0===(f=t.initial)?null:f,p=(m=(0,s._)((0,r.useState)(null),2))[0],h=m[1],x=(0,r.useRef)([]),g=(0,r.useRef)(!1),y=(0,r.useRef)(!1),(0,r.useEffect)(function(){(null==v?void 0:v.resetKey)!==null&&(x.current=[],y.current=!1,g.current=!1,h(null))},[null==v?void 0:v.resetKey]),(0,u.Yz)(function(){if(!y.current){if(null==v?void 0:v.data){var e,t;h(o(v.data.slice(0,n))),y.current=!0}else(null==v?void 0:v.waitFor)||(null===(t=x.current)||void 0===t?void 0:t.length)&&(h(o(x.current.splice(0,n))),y.current=!0);return}g.current&&(null===(e=x.current)||void 0===e?void 0:e.length)&&h(function(e){var t,r,i,s=null!==(r=x.current)&&void 0!==r?r:[],u=new Set(null==e?void 0:e.map(function(e){return e.id})),o=s.findIndex(function(e){return e&&!u.has(e.id)});if(-1===o)return x.current=[],e;var d=s[o];x.current=s.slice(o+1);var f=null!==(i=null==e?void 0:null===(t=e[0])||void 0===t?void 0:t._highlighted)&&void 0!==i&&i;return[(0,c._)((0,a._)({},d),{_highlighted:!f})].concat((0,l._)(e||[])).slice(0,n)})},d),w=(0,r.useCallback)(function(){g.current=!0},[]),b=(0,r.useCallback)(function(){g.current=!1},[]),{queData:p,enqueueItems:(0,r.useCallback)(function(e){var t=new Set(x.current.map(function(e){return e.id})),r=e.filter(function(e){return!t.has(e.id)});if(0!==r.length){var i=3*n;x.current=(0,l._)(r).concat((0,l._)(x.current)).slice(0,i)}},[n]),stopProcessing:b,startProcessing:w}),L=I.queData,T=I.enqueueItems,A=I.stopProcessing,F=I.startProcessing;return(0,r.useEffect)(function(){k?F():A()},[k,F,A]),(0,r.useEffect)(function(){C?S.connect():S.disconnect()},[C,S]),(0,r.useEffect)(function(){var e=function(e){T((Array.isArray(e)?e:[e]).map(i))};return S.on(P.event,e),function(){S.off(P.event,e)}},[S,P.event,T]),{data:L}}},97233:function(e,t,n){n.d(t,{C:function(){return a},x:function(){return c}});var r=n(5093),i=n(75271);function a(e){var t=(0,r._)((0,i.useState)(!1),2),n=t[0],a=t[1],c=(0,i.useRef)(!1);return(0,i.useEffect)(function(){var t=e.current;if(t){var n=function(e){c.current!==e&&(c.current=e,a(e))},i=new IntersectionObserver(function(e){n((0,r._)(e,1)[0].isIntersecting)},{threshold:0});return i.observe(t),function(){i.disconnect()}}},[e]),n}function c(){var e=(0,r._)((0,i.useState)(function(){return"undefined"!=typeof document&&!document.hidden}),2),t=e[0],n=e[1],a=(0,i.useRef)(t);return(0,i.useEffect)(function(){var e=function(){var e=!document.hidden;a.current!==e&&(a.current=e,n(e))};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[]),t}},90850:function(e,t,n){n.r(t),n.d(t,{LiveFeed:function(){return N}});var r=n(5093),i=n(52676),a=n(44624),c=n(38396),s=n(59629),l=n(70093),u=n(5983),o=n(75271),d=n(39968),f=n(97233);function v(){return(0,i.jsxs)("div",{"aria-hidden":!0,className:"flex flex-col items-center gap-2.5 w-full select-none",children:[(0,i.jsx)("div",{className:"flex items-end rounded-md box-border relative w-full h-[118px] overflow-hidden loading-card-live-feed"}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-0.5 relative max-w-full h-[41.5px]",children:[(0,i.jsx)("div",{className:"flex items-center justify-center gap-1.5 h-5 w-full",children:(0,i.jsx)("div",{className:"max-w-[75px] flex gap-1.5 justify-center items-center",children:(0,i.jsx)("div",{className:"h-3 w-[60px] rounded loading-card-live-feed"})})}),(0,i.jsx)("div",{className:"h-4 w-[75px] rounded loading-card-live-feed"})]})]})}var m=n(36355),p=n(89510),h=n(73216),x=n.n(h),g=n(91113),y=n.n(g),w=n(64691);function b(e){var t,n,r,a,s,u=e.item,o=e.walletSetting,d=(0,w.usePathname)(),f=(0,c.ZP)(),v=o===u.currency?u.currencyPayout:u.payout;return(0,i.jsxs)(y(),{className:"flex flex-col items-center gap-2.5 w-full",shallow:!0,scroll:!1,href:"".concat(d,"?modal=bet&tab=result&betId=").concat(u.id),children:[(0,i.jsx)("div",{className:"flex items-end rounded-md box-border relative w-full h-[118px]",children:u.game.icon?(0,i.jsx)(x(),{src:u.game.icon,alt:u.game.name,fill:!0,sizes:"100px",className:"object-cover w-full h-full rounded-md"}):(0,i.jsx)("div",{className:"flex justify-center items-center w-full h-[118px] bg-black/20 p-4",children:(0,i.jsx)("div",{className:"text-[13px] text-center text-white/85 leading-[1.333] max-w-full line-clamp-3 break-words",children:null===(t=u.game)||void 0===t?void 0:t.name})})}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-0.5 relative max-w-full",children:[(0,i.jsxs)("div",{className:"flex items-center justify-center gap-1.5 h-5 w-full",children:[(null===(n=u.user)||void 0===n?void 0:n.rank)?(0,i.jsx)("div",{children:(0,i.jsx)(m.Z,{code:null===(r=u.user.rank.split("-")[0])||void 0===r?void 0:r.toUpperCase(),size:"large"})}):null,(0,i.jsx)("div",{className:"max-w-[85px] flex gap-1.5 justify-center",children:(0,i.jsx)("p",{className:(0,l.cn)("text-xs text-input-label-color-light truncate",!(null===(a=u.user)||void 0===a?void 0:a.username)&&"text-font-color-two"),children:(null===(s=u.user)||void 0===s?void 0:s.username)||f("hidden")})})]}),(0,i.jsx)("div",{className:"text-[13px] max-w-[88.16px] [&_*]:text-[#7dd934] [&_p]:max-w-full [&_span]:truncate",children:(0,i.jsx)(p.Z,{raw:o===u.currency,amount:Number(v),size:"small"})})]})]})}var N=function(){var e,t,n,m=(0,s.ZP)().walletSetting,p=(0,a.Rx)(),h=p.data,x=p.isLoading,g=(0,c.ZP)(),y=(0,r._)((0,o.useState)(!0),2),w=y[0],N=y[1],j=(0,o.useRef)(!1),_=(0,o.useRef)(null),E=(0,f.x)(),R=(0,f.C)(_),C=(t=(e=(0,r._)((0,o.useState)(!1),2))[0],n=e[1],(0,o.useEffect)(function(){var e=_.current;if(e){var t=function(){return n(!0)},r=function(){return n(!1)};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",r),function(){e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",r)}}},[_]),t),k=E&&R,D=(0,d.X)({namespace:"RecentWins",initial:{data:h,waitFor:!0},limit:12,enableDataListening:k,enableProcessing:k&&!C,newItemDelayMs:500}).data;(0,o.useEffect)(function(){if(D&&D.length>0&&!j.current){j.current=!0;var e=setTimeout(function(){N(!1)},400);return function(){return clearTimeout(e)}}},[D]);var O=D&&D.length>0&&!j.current;return(0,i.jsxs)("div",{ref:_,className:"relative w-full min-w-[1168px] py-[3px]",children:[(0,i.jsxs)("div",{className:"pl-[5px] pr-2.5 py-[5px] left-0 top-0 z-10 absolute rounded-md bg-[#333A5B] outline outline-[5px] outline-[#0f1328] inline-flex justify-center items-center gap-[5px]",children:[(0,i.jsxs)("div",{className:"relative flex items-center justify-center w-3 h-3",children:[(0,i.jsx)("span",{className:(0,l.cn)("absolute h-full w-full rounded-full bg-[#7DD934] opacity-75",!C&&"animate-ping")}),(0,i.jsx)("span",{className:"relative h-2 w-2 rounded-full bg-gradient-to-b from-[#7DD934] to-[#7DD934] outline outline-[#212747] outline-[1px]"})]}),(0,i.jsx)("div",{className:"justify-start text-xs font-medium text-white",children:g("live_feed")})]}),(0,i.jsx)("div",{className:"w-full flex gap-2.5 relative justify-start",children:x||null===D?Array.from({length:12},function(e,t){return(0,i.jsx)("div",{className:"flex-none w-[calc(100%/12-10px*11/12)]",children:(0,i.jsx)(v,{})},t)}):(0,i.jsxs)("div",{className:"relative w-full",children:[(0,i.jsx)("div",{className:"flex flex-nowrap items-start gap-2.5 w-full overflow-visible",children:null==D?void 0:D.map(function(e,t){return(0,i.jsx)(u.E.div,{layout:!!O&&"position",initial:w?{opacity:0}:0===t&&{opacity:0,x:-32},animate:{opacity:1,x:0},transition:{x:{type:"spring",stiffness:420,damping:32,mass:.5},opacity:{duration:.18},layout:{type:"spring",stiffness:420,damping:32,mass:.5}},className:"flex-none w-[calc(100%/12-10px*11/12)]",children:(0,i.jsx)(b,{item:e,walletSetting:m})},e.id)})}),(0,i.jsx)("div",{className:"pointer-events-none absolute -right-4 top-0 h-full w-4 bg-[#0f1328]"})]})})]})}},11653:function(e,t,n){n.d(t,{V:function(){return r}});var r={LIVE_FEED:"https://socket.rainbet.com",CHAT:"https://chat.rainbet.com",ALERTS:"https://alerts.rainbet.com",CRASH:"https://crash.rainbet.com",ROULETTE:"https://roulette.rainbet.com",RAFFLE:"https://raffles.rainbet.com",CASE_BATTLES:"https://case-battles.rainbet.com"}},44624:function(e,t,n){n.d(t,{Rx:function(){return d},UQ:function(){return o},nC:function(){return u}});var r,i=n(84750),a=n(72646),c=n(15767),s=n(93678),l=n(64329),u="v1/game-history",o=(r=(0,i._)(function(e){return(0,c.Jh)(this,function(t){switch(t.label){case 0:return[4,s.VF.post(u,e)];case 1:return[2,t.sent().data]}})}),function(e){return r.apply(this,arguments)}),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.ZP)(u,function(){return o({wins:!0,take:12})},(0,a._)({refreshInterval:0,dedupingInterval:3e4,keepPreviousData:!0,revalidateOnMount:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateIfStale:!1},e))}}}]);